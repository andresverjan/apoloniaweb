<!--CONTENIDO DE ACTIONS-->

<mat-card-actions fxLayout="row" fxLayoutAlign="end center" style="margin-right: 10px">
    <button mat-raised-button (click)="adicionar()" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center"
        fxFlex="22">
        <mat-icon>person_add</mat-icon>
        Adicion
    </button>
</mat-card-actions>

<!--PROGRESS-BAR -->

<mat-progress-bar mode="indeterminate" *ngIf="IsWait"></mat-progress-bar>

<!--CARD: DATOS USERS -->

<div class="container" style="overflow: hidden">
    <mat-card-content class="window-dashboard-card-content contentprincipal" *ngIf="lShowPanelDatos">
        <mat-toolbar color="primary">
            <mat-icon matPrefix>people</mat-icon>
            <span>{{ etiquetaNombreModulo }}</span>
            <span class="example-spacer"></span>

            <button mat-icon-button class="example-icon" aria-label="Example icon-button with share icon"
                (click)="cancelar()">
                <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar>
        <mat-card-header>
            <mat-card-title> </mat-card-title>
        </mat-card-header>
        <form [formGroup]="lForm" autocomplete="off" novalidate>
            <mat-card class="cardcontent">
                <mat-card-title fxLayoutAlign="center">
                    <label>Datos de {{ etiquetaNombreModulo }}</label>
                </mat-card-title>
                <mat-card-content fxLayout="column" fxLayoutAlign="center">
                    <div *ngIf="false">
                        <mat-form-field>
                            <input matInput formControlName="_id" id="_id" placeholder="_" />
                        </mat-form-field>
                    </div>
                    <div fxLayout="row" fxFlex fxLayoutAlign="space-between center">
                        <mat-form-field fxFlex>
                            <mat-icon matPrefix>edit</mat-icon>
                            <input matInput formControlName="nombre" id="nombre" placeholder="Nombre recordatorio" />
                        </mat-form-field>
                        <section class="example-section">
                            <mat-slide-toggle class="example-margin" color="primary" formControlName="active">
                                Activo
                            </mat-slide-toggle>
                            <textarea matInput hidden formControlName="active"></textarea>
                        </section>


                    </div>
                    <div fxLayout="row" fxFlex fxLayoutAlign="space-between center">
                        <mat-form-field fxFlex>
                            <mat-icon matPrefix>edit</mat-icon>
                            <input matInput formControlName="observaciones" id="observaciones"
                                placeholder="Observaciones"/>
                        </mat-form-field>
                        <section class="example-section">
                            <mat-slide-toggle class="example-margin" color="primary" formControlName="repetir">
                                Repetir
                            </mat-slide-toggle>
                            <textarea matInput hidden formControlName="repetir"></textarea>
                        </section>
                    </div>

                    <!-- <app-datepicker label="Fecha Ingreso:"> </app-datepicker> -->
                </mat-card-content>

                <mat-card-content *ngIf="lForm.controls['repetir'].value">
                    <app-datetime label="Fecha Ingreso:" requerido=true (valor)="pruebaOnDate($event)"
                        [dateControl]="lForm.controls['fechaRecordatorio']"> </app-datetime>

                    <mat-label>Repetir cada: </mat-label>
                    <!-- Pendiente arreglar los valor de default y conectar los controles -->
                    <mat-form-field appearance="fill">
                        <mat-select>
                            <mat-option [value]="option" *ngFor="let option of repCada">{{ option }}</mat-option>
                        </mat-select>
                    </mat-form-field>

                        
                    >
                    {{this.lForm.controls['repetirCadaTimes'].value}}
                     <app-select label="Disponible" [data]="repCadaTime" icono="attach_money"
                        (valSelected)="onDisponibleSelected($event)" fxFlex default="{{lForm.controls['repetirCadaTimes'].value}}"> 
                    </app-select> 

                <!-- {{egresoForm.controls['repetirCadaTimes'].value}}
                    <app-select [data]="repCadaTime" ></app-select> -->
                    <!-- Conectar los controles del formulario -->
                    <section class="example-section">
                        {{lForm.controls['chooseEnd'].value}}
                        <label class="example-margin">Finaliza:</label>
                        <mat-radio-group formControlName="chooseEnd" (change)="onClickRadioButton($event)">
                            <div>
                                <mat-radio-button class="example-margin" color="primary" value="endsNever" >Nunca</mat-radio-button>

                            </div>
                            <div>
                                <mat-radio-button class="example-margin" color="primary" value="endsOn">El</mat-radio-button>
                            </div>
                            <div>
                                <mat-radio-button class="example-margin" color="primary" value="endsAfter">Despu√©s de </mat-radio-button>
                                
                            </div>
                            
                            
                        </mat-radio-group>

                    </section>
                </mat-card-content>
                <!-- Arreglar ultimo card de Fecha -->
                <mat-card-content *ngIf="lForm.controls['endsNever'].value == false && lForm.controls['endsAfter'].value == 0">
                    <app-datetime label="Fecha Ingreso:" requerido=true (valor)="pruebaOnDate($event)"
                        [dateControl]="lForm.controls['endsOn']"> </app-datetime>
                </mat-card-content>
                <mat-card-content *ngIf="lForm.controls['endsAfter'].value > 0">
                    <mat-form-field fxFlex>
                        <mat-icon matPrefix>edit</mat-icon>
                        <input matInput formControlName="endsAfter" id="endsAfter"
                            placeholder="Ocurrencias"/>
                    </mat-form-field>
            </mat-card-content>


                <mat-card-actions fxLayout="row" fxLayoutAlign="center center">
                    <button mat-raised-button (click)="guardar()" color="primary" *ngIf="lShowBtnAdicionar"
                        fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center" fxFlex="80">
                        <mat-icon>person_add</mat-icon>
                        Adicionar
                    </button>
                    <button mat-raised-button fxLayout="row" color="primary" fxLayout.xs="column" fxLayoutAlign="center"
                        fxFlex="80" *ngIf="lShowBtnActualizar" (click)="actualizar()">
                        <mat-icon>mode_edit</mat-icon>
                        Actualizar
                    </button>
                    <button mat-raised-button fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center" fxFlex="80"
                        (click)="eliminar()" *ngIf="lShowBtnEliminar">
                        <mat-icon>more_vert</mat-icon>
                        Eliminar
                    </button>
                    <button mat-raised-button (click)="cancelar()" color="warn" fxLayout="row" fxLayout.xs="column"
                        fxLayoutAlign="center" fxFlex="80">
                        <mat-icon>cancel</mat-icon>
                        Cancelar
                    </button>
                </mat-card-actions>
            </mat-card>
        </form>
    </mat-card-content>
    <!--CARD: USERS -->

    <mat-card-content class="window-dashboard-card-content" *ngIf="lShowPanelListado" style="overflow-block: hidden">
        <mat-toolbar color="primary">
            <span>{{ etiquetaListado }}</span>
            <span class="example-spacer"></span>
            <mat-icon>info</mat-icon>
        </mat-toolbar>

        <mat-card fxFill>
            <mat-card-title fxLayoutAlign="center">
                <label>BUSCAR</label>
            </mat-card-title>
            <mat-card-content fxLayout="column" fxLayoutAlign="center">
                <div fxLayout="row" fxFlex fxLayoutAlign="space-between center">
                    <mat-icon matPrefix>search</mat-icon>
                    <mat-form-field fxFlex="100">
                        <input matInput id="filterbyNombre" placeholder="Buscar por nombre" [(ngModel)]="filter.nombre"
                            (keyup)="findBy()" />
                    </mat-form-field>
                </div>
            </mat-card-content>
        </mat-card>
        <mat-paginator [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize" aria-label="Select page"
            (page)="handlePageChange($event)" [length]="totalRecordatorios">
        </mat-paginator>
        <!--CARD: USERS -->
        <mat-grid-list cols="3" rowHeight="200px">
            <mat-grid-tile *ngFor="let item of listado" style="overflow-x: hidden">
                <mat-card class="cardR" (click)="verDetalle(item)">
                    <mat-card-content class="dashboard-card-content">
                        <div class="icons">
                            <mat-icon>alarm</mat-icon>
                        </div>
                        <h5></h5>
                        <div class="cssRow">
                            <span class="cssRow">
                                Nombre: {{item.nombre}}
                            </span>
                        </div>
                        <h5></h5>
                        <div class="cssRow">
                            <span class="cssRow">
                                Id: {{item.id}}
                            </span>
                        </div>
                        <div class="cssRow">
                            <span class="cssRow">
                                Recordatorio Fecha: <b>{{item.fechaRecordatorio}}</b>
                            </span>
                        </div>
                    </mat-card-content>
                </mat-card>
            </mat-grid-tile>
        </mat-grid-list>
    </mat-card-content>

</div>